# Конфигурация для Docker
spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://postgres:5432/currencydb}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:password}
    hikari:
      maximum-pool-size: ${DB_POOL_SIZE:10}

  data:
    redis:
      host: ${REDIS_HOST:redis}
      port: ${REDIS_PORT:6379}

  jpa:
    hibernate:
      ddl-auto: ${DDL_AUTO:validate}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

# Для продакшена отключаем детали здоровья
management:
  endpoint:
    health:
      show-details: ${SHOW_HEALTH_DETAILS:never}
  endpoints:
    web:
      exposure:
        include: health,metrics,prometheus

# В продакшене меньше логируем
logging:
  level:
    com.example.currency: INFO
    org.springframework: WARN
    org.hibernate: WARN

# Настройки памяти для контейнера
app:
  jvm:
    max-heap-percentage: ${MAX_HEAP_PERCENTAGE:75}
    gc-type: ${GC_TYPE:G1}